%%{init: {"theme":"base", "themeVariables": { "fontSize":"12px"}}}%%
graph TB
    %% Actors - Using actual UML actor symbol
    Caller[["ğŸ‘¤ Caller<br/>(Customer/Student)<br/>Primary Actor"]]
    
    %% System Boundary
    subgraph VAVA["ğŸ¯ VAVA System"]
        direction TB
        
        %% Main Use Case
        UC1(("UC1<br/>Make Phone Call<br/>â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Dial VAVA number<br/>â€¢ Establish connection<br/>â€¢ Receive greeting"))
        
        %% Sub-processes
        Process1["ğŸ“ Call Routing<br/>â€¢ Receive from Twilio<br/>â€¢ Validate number<br/>â€¢ Create session"]
        Process2["ğŸ”— WebSocket Setup<br/>â€¢ Establish connection<br/>â€¢ Initialize audio stream<br/>â€¢ Configure Deepgram"]
        Process3["ğŸ™ï¸ Play Greeting<br/>â€¢ Load welcome message<br/>â€¢ Convert to audio<br/>â€¢ Stream to caller"]
        
        %% Flow
        UC1 --> Process1
        Process1 --> Process2
        Process2 --> Process3
    end
    
    %% External System
    Twilio{{"ğŸ“ Twilio<br/>Telephony<br/>Gateway"}}
    
    %% Connections
    Caller -.->|initiates| UC1
    Process1 -.->|receives from| Twilio
    UC1 -.->|enables| UC2Next["â†’ UC2: Have AI<br/>Conversation"]
    
    %% Styling
    classDef actorStyle fill:#4CAF50,stroke:#2E7D32,stroke-width:3px,color:#fff,font-weight:bold
    classDef usecaseStyle fill:#2196F3,stroke:#0D47A1,stroke-width:3px,color:#fff,font-weight:bold
    classDef processStyle fill:#FFF9C4,stroke:#F57F17,stroke-width:2px,color:#000
    classDef externalStyle fill:#FF9800,stroke:#E65100,stroke-width:3px,color:#fff,font-weight:bold
    classDef systemStyle fill:#E8F5E9,stroke:#2E7D32,stroke-width:3px
    classDef nextStyle fill:#E0E0E0,stroke:#616161,stroke-width:2px,color:#000,stroke-dasharray: 5 5
    
    class Caller actorStyle
    class UC1 usecaseStyle
    class Process1,Process2,Process3 processStyle
    class Twilio externalStyle
    class UC2Next nextStyle
